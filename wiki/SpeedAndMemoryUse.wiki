#summary FastRandomForest 0.98 compared to original Weka RF in speed and use of memory.
#labels Phase-QA,Featured

= Setup and Summary =

I've downloaded a set of UCI repository datasets from http://www.cs.waikato.ac.nz/~ml/weka/index_datasets.html. Ten runs of tenfold crossvalidation were used. Java version is 1.6.0_12-b04, server VM heap size 1 GB, 64-bit Windows XP, machine has dual Opteron 2354 (2 sockets, 8 cores).

In brief, you can expect a *2-fold reduction in memory use*, and a 5x speedup over Weka's original RF in single-threaded mode. Running 4 threads on a capable machine will get you at least 3x scaling, for a total of *15x faster operation* than Weka's RF.

= Speed Tests =

I've used the FastRF's built-in Benchmark tool to compare the speed of the original Weka RF to single-thread mode of !FastRandomForest on 33 datasets. The forest size was set to 100 trees, and ten runs of tenfold crossvalidation were used. 

Average speed-up factor: in single-threaded mode FastRF is *5.8 x* faster.

|| *dataset* || *numInstances* || *numAttributes* || *numClasses* || *speedup* ||
|| anneal.arff || 898 || 39 || 6 || 6.2 x ||
|| audiology.arff || 226 || 70 || 24 || 6.3 x ||
|| autos.arff || 205 || 26 || 7 || 5.1 x ||
|| balance-scale.arff || 625 || 5 || 3 || 3.5 x ||
|| breast-cancer.arff || 286 || 10 || 2 || 4.0 x ||
|| breast-w.arff || 699 || 10 || 2 || 4.8 x ||
|| colic.arff || 368 || 23 || 2 || 14.1 x ||
|| credit-a.arff || 690 || 16 || 2 || 5.1 x ||
|| credit-g.arff || 1000 || 21 || 2 || 5.2 x ||
|| diabetes.arff || 768 || 9 || 2 || 4.1 x ||
|| glass.arff || 214 || 10 || 7 || 3.6 x ||
|| heart-c.arff || 303 || 14 || 5 || 4.3 x ||
|| heart-h.arff || 294 || 14 || 5 || 4.6 x ||
|| heart-statlog.arff || 270 || 14 || 2 || 4.7 x ||
|| hepatitis.arff || 155 || 20 || 2 || 5.9 x ||
|| hypothyroid.arff || 3772 || 30 || 4 || 8.2 x ||
|| ionosphere.arff || 351 || 35 || 2 || 5.6 x ||
|| iris.arff || 150 || 5 || 3 || 3.7 x ||
|| kr-vs-kp.arff || 3196 || 37 || 2 || 6.1 x ||
|| labor.arff || 57 || 17 || 2 || 5.9 x ||
|| letter.arff || 20000 || 17 || 26 || 5.9 x ||
|| lymph.arff || 148 || 19 || 4 || 4.5 x ||
|| mushroom.arff || 8124 || 23 || 2 || 8.4 x ||
|| primary-tumor.arff || 339 || 18 || 22 || 3.9 x ||
|| segment.arff || 2310 || 20 || 7 || 4.7 x ||
|| sick.arff || 3772 || 30 || 2 || 7.9 x ||
|| sonar.arff || 208 || 61 || 2 || 6.2 x ||
|| soybean.arff || 683 || 36 || 19 || 7.8 x ||
|| splice.arff || 3190 || 61 || 3 || 7.1 x ||
|| vehicle.arff || 846 || 19 || 4 || 4.7 x ||
|| vote.arff || 435 || 17 || 2 || 8.8 x ||
|| vowel.arff || 990 || 14 || 11 || 3.9 x ||
|| waveform-5000.arff || 5000 || 41 || 3 || 5.9 x ||
|| zoo.arff || 101 || 18 || 7 || 7.6 x ||

.

= Multithreading =

!FastRandomForest 0.98 can use multiple threads in classifier training, and in out-of-bag error estimation. Test machine and software setup as above. Figure shows speedup factor over single threaded operation for three large datasets.

http://lis.irb.hr/~fran/fastRF_0.98_scaling_nessie.png

It is critical that you use the *server VM* ("java -server") for optimal multithreaded performance.

.

= Memory use =

Table shows minimum heap size required to successfully train and test a forest of 1000 trees on six datasets. If the "-Xmx" option is set to anything less (in 10 MB increments), the training will not succeed.

|| *dataset* || *heapSize_wekaRf* || *heapSize_fastRf* || *memory_savings* ||
|| splice.arff || 630 || 320 || 2.0 x ||
|| hypothyroid.arff || 130 || 50 || 2.6 x ||
|| colic.arff || 180 || 40 || 4.5 x ||
|| waveform-5000.arff || 360 || 190 || 1.9 x ||
|| segment.arff || 80 || 40 || 2.0 x ||
|| mushroom.arff || 70 || 90 || 0.8 x ||